# Postman collection

This documentation is generated by [Afterman](https://github.com/itsalb3rt/afterman) tool. If you want the original postman collection, please <a :href="$withBase('/ta-vivo.postman_collection.json')" download>click here</a>.

<h2 class="text-h5 q-my-md">Table of content</h2>

üìÅ <a href="#1l1zynonb" class="item text-capitalize">checks</a>

- GET [/checks](#1l1zynonc) 
- POST [/checks](#1l1zynond) 
- PUT [/checks/{id}](#1l1zynone) 
- GET [/checks/{id}](#1l1zynonf) 
- DELETE [/checks/{id}](#1l1zynong) 
- GET [/checks/{id}/logs](#1l1zynonh)

üìÅ <a href="#1l1zynoni" class="item text-capitalize">integrations</a>

- GET [/integrations](#1l1zynonj)
- POST [/integrations](#1l1zynonk) 
- POST [/integrations/request-email-code](#1l1zynonl) 
- POST [/integrations/slack](#1l1zynonm)
- PUT [/integrations](#1l1zynonn)
- DELETE [/integrations/{id}](#1l1zynono) 

üìÅ <a href="#1l1zynonp" class="item text-capitalize">dashboard</a>

- GET [/dashboard](#1l1zynonq)

üìÅ <a href="#1l1zynonr" class="item text-capitalize">auth</a>

- POST [/login](#1l1zynons)
- POST [/register](#1l1zynont)
- POST [/register-confirme-email](#1l1zynonu)
- GET [/request-register-confirme-email](#1l1zynonv)
- GET [/me](#1l1zynonw)

üìÅ <a href="#1l1zynonx" class="item text-capitalize">payments</a>

- GET [/paypal-request-token](#1l1zynony)
- POST [/paypal-subscription](#1l1zynonz)
- POST [/paypal-subscription-cancel](#1l1zynoo0) 
- GET [/paypal-transactions](#1l1zynoo1)
  
üìÅ <a href="#1l1zynoo2" class="item text-capitalize">pricing</a>

- GET [/pricing](#1l1zynoo3)

[Filters and More](/#filters-and-more)
======================================

The filters and sort work with `QueryStringConvertHelper.js` Util, for use it only import and use in your controller.

    import querystringConverterHelper from '../utils/querystringConverterHelper';
    // ..
    let { where, limit, offset, order } = querystringConverterHelper.parseQuery(query);
    
    

<h2 id="query-string" name="query-string" class="q-markdown--heading q-markdown--heading-h2 q-markdown--heading--anchor-link"><a href="/#query-string" aria-hidden="true" class="q-markdown--link q-markdown--link-local">Query string</a></h2>

**Filters**

**between**

For example for check createdAt from `2020-09-01` to `2020-09-30`.

    api/visits?createdAt=between:2020-09-01,2020-09-30
    
    

**Like**

For using `like` operator you can pass `search` query string var with `where` for indicate columns.

    api/visits?search=some&where=reasonVisit
    
    

This search for `some` in `reasonVisit` column.

**Limit and offset**

You can use `limit` and `offset` for pagination.

    api/visits?limit=10&page=2
    
    

This example returns the records between 11 to 20

**Order**

Use `-` sign for descending while `+` for ascending, by default if sign is not presented it will automatically set to `+` sign (ex: `sort=-created_at` or `sort=+created_at`). Value can be separated by a comma if multiple sort condition is needed (ex: `sort=id,name`).

    api/visits?sort=-created_at
    
    

More information: [https://github.com/perbert27/sequelize-querystring-converter](https://github.com/perbert27/sequelize-querystring-converter)

* * *

<h2 id="1l1zynonb" class="text-h4 q-mt-md q-mb-xs">Checks</h2>

<strong style="color:#21BA45">GET</strong> - <strong id="1l1zynonc" class="text-bold request-name">/checks</strong>

#### Headers

    http://localhost:5000/api/checks
    

Description

[Response 2xx](/#response-2xx)
==============================

    {
        "message": "Check list",
        "data": [
            {
                "id": 8,
                "target": "google.com",
                "periodToCheck": "*/10 * * * * *",
                "enabled": false,
                "createdAt": "2021-12-16T02:57:06.754Z",
                "updatedAt": "2021-12-16T02:57:12.880Z",
                "userId": 1
            },
            {
                "id": 9,
                "target": "google.com",
                "periodToCheck": "*/10 * * * *",
                "enabled": false,
                "createdAt": "2021-12-16T03:31:31.728Z",
                "updatedAt": "2021-12-16T03:32:36.143Z",
                "userId": 1
            }
        ],
        "status": 200,
        "pagination": {
            "count": 2,
            "offset": 0
        }
    }
    
    

* * *

Body

* * *

<strong style="color:#1976D2">POST</strong> - <strong id="1l1zynond" class="text-bold request-name">/checks</strong>

#### Headers

    http://localhost:5000/api/checks
    

Description

Add integration:

To add integration to check you need pass a `addIntegrations` property with array of integrations:

    {
      "addIntegrations": [
        {
          "id": 1
        },
        {
          "id": 2
        }
      ]
    }
    
    

[Response 2xx](/#response-2xx)
==============================

    {
        "message": "Check created",
        "data": {
            "id": 9,
            "target": "https://sheiley-shop.netlify.app",
            "periodToCheck": "*/10 * * * * *",
            "enabled": true,
            "userId": 1,
            "updatedAt": "2021-12-16T03:31:31.728Z",
            "createdAt": "2021-12-16T03:31:31.728Z"
        },
        "status": 200
    }
    
    

* * *

Body

    {
        "name": "some name",
        "target": "https://sheiley-shop.netlify.app",
        "periodToCheck": "10s",
        "enabled": true,
        "addIntegrations": [
            {
                "id": 1
            }
        ]
    }
    

* * *

<strong style="color:#9e9e9e">PUT</strong> - <strong id="1l1zynone" class="text-bold request-name">/checks/{id}</strong>

#### Headers

    http://localhost:5000/api/checks/8
    

Description

    {
      "addIntegrations": [
        {
          "id": 1
        },
        {
          "id": 2
        }
      ]
    }
    
    

To remove integrations you need to pass `removeIntegrations` property

    {
        "removeIntegrations": [
            {
                "id": 2
            }
        ]
    }
    
    

[Response 2xx](/#response-2xx)
==============================

    {
        "message": "Check Updated",
        "data": {
            "id": 9,
            "target": "google.com",
            "periodToCheck": "*/10 * * * *",
            "enabled": false,
            "createdAt": "2021-12-16T03:31:31.728Z",
            "updatedAt": "2021-12-16T03:32:36.143Z",
            "userId": 1,
            "check_integrations": [
                {
                    "id": 9,
                    "createdAt": "2021-12-16T03:31:31.774Z",
                    "updatedAt": "2021-12-16T03:31:31.774Z",
                    "checkId": 9,
                    "integrationId": 1,
                    "integration": {
                        "id": 1,
                        "name": "My Telegram integration",
                        "type": "telegram",
                        "appUserId": "724402246",
                        "createdAt": "2021-12-16T02:42:57.529Z",
                        "updatedAt": "2021-12-16T02:42:57.529Z",
                        "userId": 1
                    }
                }
            ]
        },
        "status": 200
    }
    
    

* * *

Body

    {
        "target": "google.com",
        "periodToCheck": "10m",
        "enabled": false,
        "addIntegrations": [
            {
                "id": 2
            }
        ]
    }
    

* * *

<strong style="color:#21BA45">GET</strong> - <strong id="1l1zynonf" class="text-bold request-name">/checks/{id}</strong>

#### Headers

    http://localhost:5000/api/checks/8
    

Description

[Response 2xx](/#response-2xx)
==============================

    {
        "message": "Check found",
        "data": {
            "id": 8,
            "target": "google.com",
            "periodToCheck": "*/10 * * * * *",
            "enabled": false,
            "createdAt": "2021-12-16T02:57:06.754Z",
            "updatedAt": "2021-12-16T02:57:12.880Z",
            "userId": 1,
            "check_integrations": [
                {
                    "id": 8,
                    "createdAt": "2021-12-16T02:57:06.781Z",
                    "updatedAt": "2021-12-16T02:57:06.781Z",
                    "checkId": 8,
                    "integrationId": 1,
                    "integration": {
                        "id": 1,
                        "name": "My Telegram integration",
                        "type": "telegram",
                        "appUserId": "724402246",
                        "createdAt": "2021-12-16T02:42:57.529Z",
                        "updatedAt": "2021-12-16T02:42:57.529Z",
                        "userId": 1
                    }
                }
            ]
        },
        "status": 200
    }
    
    

* * *

Body

* * *

<strong style="color:#C10015">DELETE</strong> - <strong id="1l1zynong" class="text-bold request-name">/checks/{id}</strong>

#### Headers

    http://localhost:5000/api/checks/7
    

Description

* * *

Body

* * *

<strong style="color:#21BA45">GET</strong> - <strong id="1l1zynonh" class="text-bold request-name">/checks/{id}/logs</strong>

#### Headers

    http://localhost:5000/api/checks/8/logs
    

Description

[Response 2xx](/#response-2xx)
==============================

    {
        "message": "Check logs found",
        "data": [
            {
                "id": 10,
                "status": "up",
                "createdAt": "2021-12-16T02:57:10.812Z",
                "updatedAt": "2021-12-16T02:57:10.812Z",
                "checkId": 8
            },
            {
                "id": 11,
                "status": "down",
                "createdAt": "2021-12-16T02:57:20.011Z",
                "updatedAt": "2021-12-16T02:57:20.011Z",
                "checkId": 8
            },
            {
                "id": 12,
                "status": "down",
                "createdAt": "2021-12-16T02:57:30.007Z",
                "updatedAt": "2021-12-16T02:57:30.007Z",
                "checkId": 8
            },
            {
                "id": 13,
                "status": "down",
                "createdAt": "2021-12-16T02:57:40.004Z",
                "updatedAt": "2021-12-16T02:57:40.004Z",
                "checkId": 8
            },
            {
                "id": 14,
                "status": "down",
                "createdAt": "2021-12-16T03:01:30.025Z",
                "updatedAt": "2021-12-16T03:01:30.025Z",
                "checkId": 8
            },
            {
                "id": 15,
                "status": "down",
                "createdAt": "2021-12-16T03:01:40.010Z",
                "updatedAt": "2021-12-16T03:01:40.010Z",
                "checkId": 8
            },
            {
                "id": 16,
                "status": "down",
                "createdAt": "2021-12-16T03:01:50.008Z",
                "updatedAt": "2021-12-16T03:01:50.008Z",
                "checkId": 8
            },
            {
                "id": 17,
                "status": "down",
                "createdAt": "2021-12-16T03:02:10.015Z",
                "updatedAt": "2021-12-16T03:02:10.015Z",
                "checkId": 8
            },
            {
                "id": 18,
                "status": "down",
                "createdAt": "2021-12-16T03:02:20.011Z",
                "updatedAt": "2021-12-16T03:02:20.011Z",
                "checkId": 8
            },
            {
                "id": 19,
                "status": "down",
                "createdAt": "2021-12-16T03:02:30.006Z",
                "updatedAt": "2021-12-16T03:02:30.006Z",
                "checkId": 8
            }
        ],
        "status": 200,
        "pagination": {
            "count": 10,
            "offset": 0
        }
    }
    
    

* * *

Body

* * *

* * *

* * *

<h2 id="1l1zynoni" class="text-h4 q-mt-md q-mb-xs">Integrations</h2>

<strong style="color:#21BA45">GET</strong> - <strong id="1l1zynonj" class="text-bold request-name">/integrations</strong>

#### Headers

    http://localhost:5000/api/integrations
    

Description

[Response 2xx](/#response-2xx)
==============================

    {
        "message": "Integrations list",
        "data": [
            {
                "id": 1,
                "name": "My Telegram integration",
                "type": "telegram",
                "appUserId": "724402246",
                "createdAt": "2021-12-16T02:42:57.529Z",
                "updatedAt": "2021-12-16T02:42:57.529Z",
                "userId": 1
            }
        ],
        "status": 200,
        "pagination": {
            "count": 1,
            "offset": 0
        }
    }
    
    

* * *

Body

* * *

<strong style="color:#1976D2">POST</strong> - <strong id="1l1zynonk" class="text-bold request-name">/integrations</strong>

#### Headers

    http://localhost:5000/api/integrations
    

Description

When the user request a integration with `Telegram` the body require a `name` property to set the name into integrations.

When the user request a `email` integration, only the `uniqueCode` is requiere.

* * *

Body

    {
        "uniqueCode": "f8skj"
    }
    

* * *

<strong style="color:#1976D2">POST</strong> - <strong id="1l1zynonl" class="text-bold request-name">/integrations/request-email-code</strong>

#### Headers

    http://localhost:5000/api/integrations/request-email-code
    

Description

[Response 2xx](/#response-2xx)
==============================

This enpoint send a unique code to the email.

    {
        "message": "Confirmation sent",
        "data": {},
        "status": 200
    }
    
    

* * *

Body

    {
        "email": "alhidalgodev@gmail.com"
    }
    

* * *

<strong style="color:#1976D2">POST</strong> - <strong id="1l1zynonm" class="text-bold request-name">/integrations/slack</strong>

#### Headers

    http://localhost:5000/api/integrations/slack
    

Description

* * *

Body

    {
        "authorizationCode": "f8skj"
    }
    

* * *

<strong style="color:#9e9e9e">PUT</strong> - <strong id="1l1zynonn" class="text-bold request-name">/integrations</strong>

#### Headers

    http://localhost:5000/api/integrations
    

Description

When the user request a integration with `Telegram` the body require a `name` property to set the name into integrations.

When the user request a `email` integration, only the `uniqueCode` is requiere.

* * *

Body

    {
        "name": "my new name"
    }
    

* * *

<strong style="color:#C10015">DELETE</strong> - <strong id="1l1zynono" class="text-bold request-name">/integrations/{id}</strong>

#### Headers

    http://localhost:5000/api/integrations/1
    

Description

[Response 2xx](/#response-2xx)
==============================

    {
        "message": "Integration deleted",
        "data": {},
        "status": 200
    }
    
    

* * *

Body

* * *

* * *

* * *

<h2 id="1l1zynonp" class="text-h4 q-mt-md q-mb-xs">Dashboard</h2>

<strong style="color:#21BA45">GET</strong> - <strong id="1l1zynonq" class="text-bold request-name">/dashboard</strong>

#### Headers

    http://localhost:5000/api/dashboard
    

Description

* * *

Body

* * *

* * *

* * *

<h2 id="1l1zynonr" class="text-h4 q-mt-md q-mb-xs">Auth</h2>

<strong style="color:#1976D2">POST</strong> - <strong id="1l1zynons" class="text-bold request-name">/login</strong>

#### Headers

    http://localhost:5000/api/auth/login
    

Description

* * *

Body

    {
        "email": "admin@tavivo.com",
        "password": "secret"
    }
    

* * *

<strong style="color:#1976D2">POST</strong> - <strong id="1l1zynont" class="text-bold request-name">/register</strong>

#### Headers

    http://localhost:5000/api/auth/register
    

Description

* * *

Body

    {
        "fullname": "Jhon Doe",
        "email":"some@d.com",
        "password": "Abc1234567",
        "confirmPassword": "Abc1234567"
    }
    

* * *

<strong style="color:#1976D2">POST</strong> - <strong id="1l1zynonu" class="text-bold request-name">/register-confirme-email</strong>

#### Headers

    http://localhost:5000/api/auth/register-email-confirmation
    

Description

* * *

Body

    {
        "uniqueCode": "Abc1234567"
    }
    

* * *

<strong style="color:#21BA45">GET</strong> - <strong id="1l1zynonv" class="text-bold request-name">/request-register-confirme-email</strong>

#### Headers

    http://localhost:5000/api/auth/request-register-email-confirmation
    

Description

* * *

Body

* * *

<strong style="color:#21BA45">GET</strong> - <strong id="1l1zynonw" class="text-bold request-name">/me</strong>

#### Headers

    http://localhost:5000/api/auth/me
    

Description

* * *

Body

* * *

* * *

* * *

<h2 id="1l1zynonx" class="text-h4 q-mt-md q-mb-xs">payments</h2>

<strong style="color:#21BA45">GET</strong> - <strong id="1l1zynony" class="text-bold request-name">/paypal-request-token</strong>

#### Headers

    http://localhost:5000/api/payments/paypal-request-token
    

Description

* * *

Body

* * *

<strong style="color:#1976D2">POST</strong> - <strong id="1l1zynonz" class="text-bold request-name">/paypal-subscription</strong>

#### Headers

    http://localhost:5000/api/payments/paypal-subscription
    

Description

* * *

Body

    {
        "subscriptionId": "I-JTDNVHKUV92A"
    }
    

* * *

<strong style="color:#1976D2">POST</strong> - <strong id="1l1zynoo0" class="text-bold request-name">/paypal-subscription-cancel</strong>

#### Headers

    http://localhost:5000/api/payments/paypal-subscription-cancel
    

Description

* * *

Body

* * *

<strong style="color:#21BA45">GET</strong> - <strong id="1l1zynoo1" class="text-bold request-name">/paypal-transactions</strong>

#### Headers

    http://localhost:5000/api/payments/paypal-transactions
    

Description

* * *

Body

* * *

* * *

* * *

<h2 id="1l1zynoo2" class="text-h4 q-mt-md q-mb-xs">Pricing</h2>

<strong style="color:#21BA45">GET</strong> - <strong id="1l1zynoo3" class="text-bold request-name">/pricing</strong>

#### Headers

    http://localhost:5000/api/pricing
    

Description

* * *

Body

* * *

* * *